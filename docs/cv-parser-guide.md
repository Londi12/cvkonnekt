# CV Parser Guide

## Overview

The CV parser is a key component of our application, allowing users to upload their existing CVs and automatically extract structured information. This document explains how the parser works and how it handles different file formats, including our own CV templates.

## Supported File Formats

The CV parser supports the following file formats:

- PDF (.pdf)
- Microsoft Word (.docx)
- Plain Text (.txt)

## How It Works

1. **File Type Detection**: When a file is uploaded, the system first detects its type using the file signature.

2. **Template Detection**: The parser checks if the file is one of our own CV templates by looking for specific signatures in the content.

3. **Text Extraction**: Depending on the file type, the appropriate extraction method is used:
   - PDF: Using PDF.js library
   - DOCX: Using mammoth.js library
   - TXT: Direct text extraction

4. **Parsing**: The extracted text is analyzed to identify and extract structured information:
   - Personal information (name, contact details, etc.)
   - Professional summary
   - Work experience
   - Education
   - Skills

5. **Confidence Score**: The parser provides a confidence score (0-100) indicating how reliable the extracted information is.

## Parsing Our Own Templates

When a user uploads a PDF or DOCX version of a CV created with our application, the parser uses specialized logic to extract information with higher accuracy.

### Template Detection

Our templates include specific markers that identify them as generated by our application. The parser looks for these markers to determine if the uploaded file is one of our templates and which template type it is.

### Benefits of Using Our Templates

- **Higher Accuracy**: When parsing our own templates, the extraction accuracy is significantly higher (95%+ confidence).
- **Better Structure**: Information is extracted with proper structure and formatting.
- **Complete Data**: All sections are reliably extracted, even those that might be missed in generic parsing.

## Troubleshooting

If users encounter issues when uploading their CVs:

1. **Ensure the file is readable**: PDF files should have selectable text, not just images.
2. **Check the format**: Some advanced formatting in Word documents might affect parsing.
3. **Try alternative formats**: If a PDF doesn't parse well, try uploading the same CV in DOCX format.

## Development

### Adding New Template Detection

When new CV templates are added to the application:

1. Update the `TemplateType` enum in `cv-parser.ts`
2. Add new signature patterns to `detectOwnTemplateFromText` function
3. Create test files for the new template types

### Testing

The parser includes automated tests to verify its functionality:

- Detection of our templates in different formats
- Parsing accuracy for different CV sections
- Handling of edge cases and malformed files
